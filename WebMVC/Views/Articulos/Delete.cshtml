@model DTOs.ArticuloDTO

@{
    ViewData["Title"] = "Eliminar Artículo";
}

<!-- Título -->
<div class="container mt-5">
    <h1 class="text-center text-danger">@ViewData["Title"]</h1>
    <h4 class="text-center text-danger mb-4">¿Estás seguro de que deseas eliminar este artículo? </h4>

    <!-- Detalles del Artículo -->
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <div class="card shadow-lg p-4">
                <div class="card-body">
                    <h4 class="text-center">Detalles del Artículo</h4>
                    <hr />

                    <dl class="row">
                        <dt class="col-sm-4">
                            <strong>@Html.DisplayNameFor(model => model.Id)</strong>
                        </dt>
                        <dd class="col-sm-8">
                            @Html.DisplayFor(model => model.Id)
                        </dd>

                        <dt class="col-sm-4">
                            <strong>@Html.DisplayNameFor(model => model.Name)</strong>
                        </dt>
                        <dd class="col-sm-8">
                            @Html.DisplayFor(model => model.Name)
                        </dd>

                        <dt class="col-sm-4">
                            <strong>@Html.DisplayNameFor(model => model.Description)</strong>
                        </dt>
                        <dd class="col-sm-8">
                            @Html.DisplayFor(model => model.Description)
                        </dd>

                        <dt class="col-sm-4">
                            <strong>@Html.DisplayNameFor(model => model.ImageUrl)</strong>
                        </dt>
                        <dd class="col-sm-8 text-center">
                            <img src="@Model.ImageUrl" alt="Imagen del Artículo" class="img-fluid rounded" style="max-width: 200px; object-fit: contain;" />
                        </dd>

                        <dt class="col-sm-4">
                            <strong>@Html.DisplayNameFor(model => model.MinimumPurchase)</strong>
                        </dt>
                        <dd class="col-sm-8">
                            @Html.DisplayFor(model => model.MinimumPurchase)
                        </dd>

                        <dt class="col-sm-4">
                            <strong>@Html.DisplayNameFor(model => model.ExpirationDate)</strong>
                        </dt>
                        <dd class="col-sm-8">
                            @Html.DisplayFor(model => model.ExpirationDate)
                        </dd>

                        <dt class="col-sm-4">
                            <strong>@Html.DisplayNameFor(model => model.Stock)</strong>
                        </dt>
                        <dd class="col-sm-8">
                            @Html.DisplayFor(model => model.Stock)
                        </dd>
                    </dl>

                    <!-- Confirmación de Eliminación -->
                    <div class="text-center mt-4">
                        <form id="deleteForm" asp-action="DeleteConfirmado" method="post">
                            <!-- Campo oculto para enviar el ID correctamente -->
                            <input type="hidden" asp-for="Id" />

                            <button type="submit" class="btn btn-danger" id="deleteButton">
                                <i class="fas fa-trash-alt"></i> Eliminar Artículo
                            </button>
                        </form>

                        <br />
                        <a asp-action="Edit" asp-route-id="@Model.Id" class="btn btn-warning">
                            <i class="fas fa-edit"></i> Editar Artículo
                        </a>
                        <br />
                        <br />
                        <a asp-action="List" class="btn btn-outline-secondary">
                            <i class="fas fa-arrow-left"></i> Volver al listado
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Script para Confirmación -->
@section Scripts {
    <script>
        document.getElementById("deleteButton").addEventListener("click", function (event) {
            event.preventDefault();  // Evitar que se envíe el formulario de inmediato
            const userConfirmed = confirm("¿Estás seguro de que deseas eliminar este artículo? Esta acción no se puede deshacer.");

            if (userConfirmed) {
                // Si el usuario confirma, enviamos el formulario
                document.getElementById("deleteForm").submit();
            } else {
                // Si el usuario cancela, no hacemos nada
                alert("El artículo no ha sido eliminado.");
            }
        });
    </script>
}
